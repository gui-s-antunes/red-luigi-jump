{"version":3,"file":"bundle.js","mappings":"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","sources":["webpack://aulas/./src/controllers.ts","webpack://aulas/./src/game.ts","webpack://aulas/webpack/bootstrap","webpack://aulas/./src/index.ts"],"sourcesContent":["import './game';\nimport { Mario } from './game';\n\nexport const marioSprite = document.querySelector('.mario') as HTMLImageElement;\nexport const pipeSprite = document.querySelector('.pipe') as HTMLImageElement;\nexport const playButton = document.querySelector('.start') as HTMLButtonElement;\nexport const playScore = document.querySelector(\n  '.game-menu__p',\n) as HTMLParagraphElement;\nexport const playTopScore = document.querySelector(\n  '.game-menu__p-top-score',\n) as HTMLParagraphElement;\n\nexport const scoreP = document.querySelector('.score') as HTMLParagraphElement;\nexport let topScore = getTopScore();\n\nexport let intervalController: null | NodeJS.Timer = null;\nexport let intervalMarioChecker: null | NodeJS.Timer = null;\nexport let timeoutMarioController: null | NodeJS.Timer = null;\n\nexport const mario = new Mario(0, 0);\n\nexport let marioPosition = getElementPosition(marioSprite);\nexport let pipePosition = getElementPosition(pipeSprite);\n\ndocument.addEventListener('keydown', (event) => {\n  if (marioSprite.classList.contains('jump')) return;\n  if (event.key === ' ' || event.key === 'ArrowUp') setJump();\n});\n\nplayButton.addEventListener('click', () => {\n  resetPipe(pipeSprite);\n  resetMario(marioSprite);\n  switchPlayButton();\n  startGame();\n  mario.startTime = +new Date();\n  startInterval();\n});\n\nexport function resetMario(mario: HTMLImageElement): void {\n  mario.classList.remove('jump');\n  mario.src = './assets/images/mario_gif_cortado.gif';\n  mario.style.animationPlayState = 'running';\n}\n\nexport function resetPipe(pipe: HTMLImageElement): void {\n  pipe.classList.remove('pipe-animation');\n}\n\nexport function startInterval(): void {\n  intervalController = setInterval(() => {\n    mario.setPoints();\n    scoreP.textContent = `Score: ${mario.points}`;\n  }, 50);\n}\n\nexport function switchPlayButton(): void {\n  const playbuttonDiv = playButton.parentElement as HTMLDivElement;\n\n  playbuttonDiv.style.display =\n    window.getComputedStyle(playbuttonDiv, null).display === 'flex'\n      ? 'none'\n      : 'flex';\n}\n\nexport function startGame(): void {\n  playScore.style.display = 'block';\n\n  pipeSprite.classList.add('pipe-animation');\n  pipeSprite.style.animationPlayState = 'running';\n\n  intervalMarioChecker = setInterval(() => {\n    marioPosition = getElementPosition(marioSprite);\n    pipePosition = getElementPosition(pipeSprite);\n\n    if (!isMarioOnDanger()) return;\n\n    if (isPipeUnderMario()) stopGame();\n  }, 15);\n}\n\nexport function stopGame(): void {\n  clearIntervalTimeOut('timeout', timeoutMarioController);\n  clearIntervalTimeOut('interval', intervalController, intervalMarioChecker);\n\n  stopAnimations(pipeSprite, marioSprite);\n\n  setMarioGameOverSprite('./assets/images/game-over.png');\n\n  setFinalScore();\n  compareFinalScoreToTopScore(mario.points);\n  setTopScore(playTopScore, topScore);\n\n  switchPlayButton();\n}\n\nexport function clearIntervalTimeOut(clearType: string, ...args: any[]): void {\n  args.forEach((timer) =>\n    clearType === 'interval' ? clearInterval(timer) : clearTimeout(timer),\n  );\n}\n\nexport function stopAnimations(...sprites: HTMLImageElement[]): void {\n  sprites.forEach((sprite) => (sprite.style.animationPlayState = 'paused'));\n}\n\nexport function setMarioGameOverSprite(path: string): void {\n  marioSprite.src = path;\n}\n\nexport function getTopScore(): number {\n  return localStorage['mario_top_score'] ?? 0;\n}\n\nexport function compareFinalScoreToTopScore(finalScore: number): void {\n  if (finalScore > topScore) topScore = finalScore;\n  topScore = finalScore > topScore ? finalScore : topScore;\n  localStorage['mario_top_score'] = topScore;\n}\n\nexport function setTopScore(\n  domTopScore: HTMLParagraphElement,\n  topScore: number,\n): void {\n  domTopScore.textContent = `Top Score: ${topScore}`;\n}\n\nexport function setFinalScore(): void {\n  playScore.textContent = `Final Score: ${mario.points}`;\n}\n\nexport function setJump(): void {\n  marioSprite.classList.add('jump');\n\n  timeoutMarioController = setTimeout(() => {\n    marioSprite.classList.remove('jump');\n  }, 900);\n}\n\nfunction getElementPosition(element: HTMLImageElement): DOMRect {\n  return element.getBoundingClientRect();\n}\n\nfunction isMarioOnDanger(): boolean {\n  return marioPosition.bottom >= pipePosition.top;\n}\n\nfunction isPipeUnderMario(): boolean {\n  return (\n    pipePosition.left <= marioPosition.right &&\n    pipePosition.right >= (marioPosition.right + marioPosition.left) / 2\n  );\n}\n","export class Points {\n  constructor(private _points: number) {}\n\n  set points(newPoints: number) {\n    this._points = newPoints;\n  }\n\n  get points(): number {\n    return this._points;\n  }\n}\n\nexport class Mario {\n  private _points: Points = new Points(0);\n\n  constructor(private _startTime: number, private _endTime: number) {}\n\n  set endTime(time: number) {\n    this._endTime = time;\n  }\n\n  get endTime(): number {\n    return this._endTime;\n  }\n\n  set startTime(time: number) {\n    this._startTime = time;\n  }\n\n  get startTime(): number {\n    return this._startTime;\n  }\n\n  calcPoints(): number {\n    return this.endTime - this.startTime;\n  }\n\n  setPoints(): void {\n    this._endTime = +new Date();\n    this._points.points = this.calcPoints();\n  }\n\n  get points(): number {\n    return this._points.points;\n  }\n}\n\n// const mario = new Mario(+new Date());\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","import './controllers';\nimport { playTopScore, setTopScore, topScore } from './controllers';\n\n// fazer jump que adiciona jump ao class de mário e depois tira\n// vai ter um botão de reiniciar no DOM, e aqui ele vai refazer o startime e endtime, e também recomeçar a contagem de pontos\n// ao morrer, a contagem de pontos para também\n\nsetTopScore(playTopScore, topScore);\n"],"names":[],"sourceRoot":""}